{% extends 'base.html.twig' %}
{% block title %}
test
{% endblock %}

{% block stylesheets %}
    {% stylesheets '@AppBundle/Resources/public/css/dhtmlx/dhtmlxscheduler.css' %}
        <link rel="stylesheet" href="{{ asset_url }}" media="screen"/>
    {% endstylesheets %}
{% endblock %}

{% block body %}

<style type="text/css" media="screen">
	html, body{
		margin:0px;
		padding:0px;
		height:100%;
		overflow:hidden;
	}
</style>

<body onload="init();">

    <form id="xml_form" action="{{ path('xmlWriter')}}" method="post" target="hidden_frame" >
        <input type="hidden" name="data" value="" id="data">
        <input type="button" name="save" value="save" onclick="enregistrer()" >
    </form>

    <div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100%;'>
  		<div class="dhx_cal_navline">
  			<div class="dhx_cal_prev_button">&nbsp;</div>
  			<div class="dhx_cal_next_button">&nbsp;</div>
  			<div class="dhx_cal_today_button"></div>
  			<div class="dhx_cal_date"></div>
  			<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
  			<div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
  			<div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
  		</div>
  		<div class="dhx_cal_header">
  		</div>
  		<div class="dhx_cal_data">
  		</div>
  	</div>

</body>

{% endblock %}

{% block javascripts %}
  {% javascripts '@AppBundle/Resources/public/js/dhtmlxscheduler.js' %}
      <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
  {% javascripts '@AppBundle/Resources/public/js/dhtmlxscheduler_serialize.js' %}
      <script src="{{ asset_url }}"></script>
  {% endjavascripts %}

  <script>
      function init() {
          scheduler.config.xml_date="%Y-%m-%d %H:%i";
          scheduler.init('scheduler_here',new Date(2015,0,10),"week");
          scheduler.load("{{ asset('public/events.xml')}}")
          scheduler.config.multi_day = false;
      }

      function enregistrer(){
          var form = document.getElementById("xml_form");
          form.elements.data.value = scheduler.toXML();
          form.submit();
      }
  </script>

{% endblock %}
